<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Introduction to Geoprocessing of Gridded Data in RStudio | UCL-UoG International Training Workshop</title>
  <meta name="description" content="UCL-UoG International Workshop" />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Introduction to Geoprocessing of Gridded Data in RStudio | UCL-UoG International Training Workshop" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="UCL-UoG International Workshop" />
  <meta name="github-repo" content="UCLPG-MSC-SGDS/UCL-UoG-Workshop" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Introduction to Geoprocessing of Gridded Data in RStudio | UCL-UoG International Training Workshop" />
  
  <meta name="twitter:description" content="UCL-UoG International Workshop" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction-to-rstudio-and-geoprocessing.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="assets/custom.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo">
<img src="images/general/1_Top_Corner_image.png">
</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#structure"><i class="fa fa-check"></i>Structure</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contact-details-of-instructors"><i class="fa fa-check"></i>Contact Details of Instructors</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="installation-of-r-and-rstudio.html"><a href="installation-of-r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> Installation of R and RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="installation-of-r-and-rstudio.html"><a href="installation-of-r-and-rstudio.html#what-is-r-and-rstudio"><i class="fa fa-check"></i><b>1.1</b> What is R and RStudio?</a></li>
<li class="chapter" data-level="1.2" data-path="installation-of-r-and-rstudio.html"><a href="installation-of-r-and-rstudio.html#downloading-and-install-r-and-rstudio-on-to-your-laptop"><i class="fa fa-check"></i><b>1.2</b> Downloading and install R and RStudio on to your laptop</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="installation-of-r-and-rstudio.html"><a href="installation-of-r-and-rstudio.html#installation-for-macos-users"><i class="fa fa-check"></i><b>1.2.1</b> Installation for MacOS users</a></li>
<li class="chapter" data-level="1.2.2" data-path="installation-of-r-and-rstudio.html"><a href="installation-of-r-and-rstudio.html#installation-for-windows-users"><i class="fa fa-check"></i><b>1.2.2</b> Installation for Windows users</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-rstudio-and-geoprocessing.html"><a href="introduction-to-rstudio-and-geoprocessing.html"><i class="fa fa-check"></i><b>2</b> Introduction to RStudio and Geoprocessing</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-rstudio-and-geoprocessing.html"><a href="introduction-to-rstudio-and-geoprocessing.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="introduction-to-rstudio-and-geoprocessing.html"><a href="introduction-to-rstudio-and-geoprocessing.html#learning-outcomes"><i class="fa fa-check"></i><b>2.1.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="2.1.2" data-path="introduction-to-rstudio-and-geoprocessing.html"><a href="introduction-to-rstudio-and-geoprocessing.html#becoming-familiar-with-the-panels-in-rstudio"><i class="fa fa-check"></i><b>2.1.2</b> Becoming familiar with the panels in RStudio</a></li>
<li class="chapter" data-level="2.1.3" data-path="introduction-to-rstudio-and-geoprocessing.html"><a href="introduction-to-rstudio-and-geoprocessing.html#using-r-console-as-a-calculator"><i class="fa fa-check"></i><b>2.1.3</b> Using R Console as a Calculator</a></li>
<li class="chapter" data-level="2.1.4" data-path="introduction-to-rstudio-and-geoprocessing.html"><a href="introduction-to-rstudio-and-geoprocessing.html#creating-basic-objects-and-assigning-values-to-it"><i class="fa fa-check"></i><b>2.1.4</b> Creating basic objects and assigning values to it</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-rstudio-and-geoprocessing.html"><a href="introduction-to-rstudio-and-geoprocessing.html#basics-of-managing-data-in-rstudio"><i class="fa fa-check"></i><b>2.2</b> Basics of managing data in RStudio</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction-to-rstudio-and-geoprocessing.html"><a href="introduction-to-rstudio-and-geoprocessing.html#how-do-we-enter-data-into-rstudio"><i class="fa fa-check"></i><b>2.2.1</b> How do we enter data into RStudio?</a></li>
<li class="chapter" data-level="2.2.2" data-path="introduction-to-rstudio-and-geoprocessing.html"><a href="introduction-to-rstudio-and-geoprocessing.html#how-do-we-create-a-variable-based-on-other-existing-variables-in-our-data-frame"><i class="fa fa-check"></i><b>2.2.2</b> How do we create a variable based on other existing variables in our data frame?</a></li>
<li class="chapter" data-level="2.2.3" data-path="introduction-to-rstudio-and-geoprocessing.html"><a href="introduction-to-rstudio-and-geoprocessing.html#how-do-we-set-the-working-directory-in-our-computer-by-connecting-our-folder-to-rstudio-with-the-setwd-function"><i class="fa fa-check"></i><b>2.2.3</b> How do we set the working directory in our computer by connecting our folder to RStudio with the <code>setwd()</code> function?</a></li>
<li class="chapter" data-level="2.2.4" data-path="introduction-to-rstudio-and-geoprocessing.html"><a href="introduction-to-rstudio-and-geoprocessing.html#how-do-we-import-merge-and-export-csv-data-with-rstudio"><i class="fa fa-check"></i><b>2.2.4</b> How do we import, merge and export CSV data with RStudio?</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-rstudio-and-geoprocessing.html"><a href="introduction-to-rstudio-and-geoprocessing.html#basic-visualisation-of-spatial-data-in-rstudio"><i class="fa fa-check"></i><b>2.3</b> Basic visualisation of spatial data in RStudio</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="introduction-to-rstudio-and-geoprocessing.html"><a href="introduction-to-rstudio-and-geoprocessing.html#installing-packages-into-rstudio"><i class="fa fa-check"></i><b>2.3.1</b> Installing packages into RStudio</a></li>
<li class="chapter" data-level="2.3.2" data-path="introduction-to-rstudio-and-geoprocessing.html"><a href="introduction-to-rstudio-and-geoprocessing.html#adding-shapefiles-in-rstudio"><i class="fa fa-check"></i><b>2.3.2</b> Adding shapefiles in RStudio</a></li>
<li class="chapter" data-level="2.3.3" data-path="introduction-to-rstudio-and-geoprocessing.html"><a href="introduction-to-rstudio-and-geoprocessing.html#mapping-with-tmap-functions-in-rstudio"><i class="fa fa-check"></i><b>2.3.3</b> Mapping with ‘tmap’ functions in RStudio</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html"><i class="fa fa-check"></i><b>3</b> Introduction to Geoprocessing of Gridded Data in RStudio</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#learning-outcomes-1"><i class="fa fa-check"></i><b>3.1.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="3.1.2" data-path="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#datasets-setting-up-the-work-directory"><i class="fa fa-check"></i><b>3.1.2</b> Datasets &amp; setting up the work directory</a></li>
<li class="chapter" data-level="3.1.3" data-path="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#loading-and-installing-packages"><i class="fa fa-check"></i><b>3.1.3</b> Loading and installing packages</a></li>
<li class="chapter" data-level="3.1.4" data-path="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#loading-datasets"><i class="fa fa-check"></i><b>3.1.4</b> Loading datasets</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#mapping-overlays-based-on-decisions"><i class="fa fa-check"></i><b>3.2</b> Mapping Overlays based on Decisions</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#classification-of-raster"><i class="fa fa-check"></i><b>3.2.1</b> Classification of raster</a></li>
<li class="chapter" data-level="3.2.2" data-path="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#finding-areas-that-flood-prone-based-on-reclassifed-rasters-through-averaging"><i class="fa fa-check"></i><b>3.2.2</b> Finding areas that flood prone based on reclassifed rasters through averaging</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">UCL-UoG International Training Workshop</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction-to-geoprocessing-of-gridded-data-in-rstudio" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Introduction to Geoprocessing of Gridded Data in RStudio<a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#introduction-to-geoprocessing-of-gridded-data-in-rstudio" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="introduction-1" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Introduction<a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#introduction-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>With the proliferation of open-source spatial dataset - risk models derived from environmental, sociodemographic and topological factors are becoming increasingly available for open research. Such models have broadly shown to be useful in delineating geographical areas of risk or suitability for a certain outcomes. Today, we are going to explore this qualitatively using a knowledge-driven approach.</p>
<div id="learning-outcomes-1" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Learning outcomes<a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#learning-outcomes-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To provide an introductory overview to the applicability of knowledge-driven methods, in particular, we are going to learn how to a set of decision rules or a set of conditions (based on existing knowledge) that are optimal for an outcome to occur. We will focus on flooding event to build from yesterday’s workshop. This simple technique is especially useful in a data-sparse situations, and is a more practical solution for organisations that want rapid results, or when for the first time the user is exploring the potential geographical limits of certain outcome.</p>
</div>
<div id="datasets-setting-up-the-work-directory" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Datasets &amp; setting up the work directory<a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#datasets-setting-up-the-work-directory" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before you begin do make sure to download all data by <a href=""><strong>clicking here</strong></a>. Go to the “<strong>Workshop</strong>” folder and within it create a “<strong>Day 2</strong>”. Download and move all the data for this session in that folder.</p>
<p>Now set your working directory, Remember, for Windows, the work directory will be:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb31-1" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;C:/Users/AccountName/Desktop/Workshop/Day 2&quot;</span>)</span></code></pre></div>
<p>For MAC, the work directory will be:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb32-1" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;/Users/AccountName/Desktop/Workshop/Day 2&quot;</span>)</span></code></pre></div>
</div>
<div id="loading-and-installing-packages" class="section level3 hasAnchor" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Loading and installing packages<a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#loading-and-installing-packages" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We will need to load the following packages:</p>
<ul>
<li><code>sf</code>: Simple Features</li>
<li><code>tmap</code>: Thematic Mapping</li>
</ul>
<p>The above packages <code>sf</code> and <code>tmap</code> should have been installed in the previous session(s). We will need to install a new package:</p>
<ul>
<li><code>raster</code>: Raster/gridded data analysis and manipulation</li>
</ul>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb33-1" tabindex="-1"></a><span class="co"># Install the packages: spatialEco using the install.package()</span></span>
<span id="cb33-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb33-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>)</span>
<span id="cb33-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb33-3" tabindex="-1"></a></span>
<span id="cb33-4"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb33-4" tabindex="-1"></a><span class="co"># Load the packages with library()</span></span>
<span id="cb33-5"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb33-5" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;sf&quot;</span>)</span>
<span id="cb33-6"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb33-6" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;tmap&quot;</span>)</span>
<span id="cb33-7"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb33-7" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;raster&quot;</span>)</span></code></pre></div>
</div>
<div id="loading-datasets" class="section level3 hasAnchor" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> Loading datasets<a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#loading-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Lets begin loading the following list of raster files, each is a variable of interest:</p>
<ul>
<li>Raster: Built-Settlements Extents in Ghana (100m resolution) named <code>Built-Settlements Extents 100m.tif</code></li>
<li>Raster: Distance to nearest inland waterbody in Ghana (100m resolution) named <code>Distance to nearest inland waterbody 100m.tif</code></li>
<li>Raster: Distance to nearest major waterway in Ghana (100m resolution) named <code>Distance to nearest major waterway 100m.tif</code></li>
<li>Raster: Precipitation in Ghana (100m resolution) named <code>Precipitation 100m Resampled.tif</code></li>
<li>Raster: Land Surface Elevation in Ghana (100m resolution) named <code>Elevation 100m.tif</code></li>
<li>Raster: Land Surface Slope (100m resolution) named <code>Slope 100m.tif</code></li>
</ul>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb34-1" tabindex="-1"></a><span class="co"># load the raster</span></span>
<span id="cb34-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb34-2" tabindex="-1"></a>builtsettlements <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="st">&quot;Built-Settlements Extents 100m.tif&quot;</span>)</span>
<span id="cb34-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb34-3" tabindex="-1"></a>dist_waterbody <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="st">&quot;Distance to nearest inland waterbody 100m.tif&quot;</span>)</span>
<span id="cb34-4"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb34-4" tabindex="-1"></a>dist_waterways <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="st">&quot;Distance to nearest major waterway 100m.tif&quot;</span>)</span>
<span id="cb34-5"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb34-5" tabindex="-1"></a>land_elevation <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="st">&quot;Elevation 100m.tif&quot;</span>)</span>
<span id="cb34-6"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb34-6" tabindex="-1"></a>land_slope <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="st">&quot;Slope 100m.tif&quot;</span>)</span>
<span id="cb34-7"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb34-7" tabindex="-1"></a>precipitation <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="st">&quot;Precipitation 100m Resampled.tif&quot;</span>)</span></code></pre></div>
<p>Load the shapefile regional and district borders for Ghana:</p>
<ul>
<li>Shape file: <code>Regions.shp</code></li>
<li>Shape file: <code>Districts.shp</code></li>
</ul>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb35-1" tabindex="-1"></a><span class="co"># load the shapefiles</span></span>
<span id="cb35-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb35-2" tabindex="-1"></a>regions <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;Regions.shp&quot;</span>)</span>
<span id="cb35-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb35-3" tabindex="-1"></a>districts <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;Districts.shp&quot;</span>)</span></code></pre></div>
<p>For some rasters, you will be able to inspect each raster to know its dimension, extent, resolution and minimum and maximum values. Since are going to stack all the rasters together, you definitely want the: <code>dimension</code>, <code>extent</code> and <code>resolution</code> to be the same. If there’s a slight difference the stack won’t work.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb36-1" tabindex="-1"></a>precipitation</span>
<span id="cb36-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb36-2" tabindex="-1"></a>builtsettlements</span></code></pre></div>
<p>To visualize raster data, using examples of precipitation (mm) and proximity to a major river (km) - you can write the following code:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb37-1" tabindex="-1"></a><span class="co"># Rainfall</span></span>
<span id="cb37-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb37-2" tabindex="-1"></a><span class="co"># Spectral colours are useful for diverging scales &quot;Spectral&quot; is Rd-Or-Yl-Gr-Bu. &quot;-Spectral&quot; reverses the order</span></span>
<span id="cb37-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb37-3" tabindex="-1"></a><span class="fu">tm_shape</span>(precipitation) <span class="sc">+</span> <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">&quot;cont&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Rainfall (mm)&quot;</span>, <span class="at">palette=</span> <span class="st">&quot;-Spectral&quot;</span>) <span class="sc">+</span></span>
<span id="cb37-4"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb37-4" tabindex="-1"></a>    <span class="fu">tm_shape</span>(districts) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">alpha =</span> <span class="dv">0</span>, <span class="at">border.col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb37-5"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb37-5" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>, <span class="at">legend.outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="images/general/14_eg1.png" width="60%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb38-1" tabindex="-1"></a><span class="co"># Proximity to nearest major waterway</span></span>
<span id="cb38-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb38-2" tabindex="-1"></a><span class="co"># We use &quot;Blues&quot; as the colour scheme</span></span>
<span id="cb38-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb38-3" tabindex="-1"></a><span class="fu">tm_shape</span>(dist_waterways) <span class="sc">+</span> <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">&quot;cont&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Proximity to Waterways (km)&quot;</span>, <span class="at">palette=</span> <span class="st">&quot;-Blues&quot;</span>) <span class="sc">+</span></span>
<span id="cb38-4"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb38-4" tabindex="-1"></a>    <span class="fu">tm_shape</span>(districts) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">alpha =</span> <span class="dv">0</span>, <span class="at">border.col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb38-5"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb38-5" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>, <span class="at">legend.outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="images/general/15_eg2.png" width="60%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="mapping-overlays-based-on-decisions" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Mapping Overlays based on Decisions<a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#mapping-overlays-based-on-decisions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="classification-of-raster" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Classification of raster<a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#classification-of-raster" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="waterways-and-waterbodies" class="section level4 hasAnchor" number="3.2.1.1">
<h4><span class="header-section-number">3.2.1.1</span> Waterways and Waterbodies<a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#waterways-and-waterbodies" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For each raster will be accompanied with certain decisions which we will have to reclassify in order to characterise the flood risk of surfaces in Ghana. For instance - we will use the following criteria for proximity to waterways or waterbodies.</p>
<p>We have summarized these limits or thresholds in a table as follows:</p>
<table>
<thead>
<tr class="header">
<th><strong>Risk type</strong></th>
<th><strong>Threshold</strong></th>
<th><strong>Assigned Score</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Very High Risk</td>
<td>0-1 km</td>
<td>5</td>
</tr>
<tr class="even">
<td>High Risk</td>
<td>1-5 km</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Moderate</td>
<td>5-20 km</td>
<td>3</td>
</tr>
<tr class="even">
<td>Low Risk</td>
<td>20-50 km</td>
<td>2</td>
</tr>
<tr class="odd">
<td>Very Low Risk</td>
<td>+50 km</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>We should use the aforementioned thresholds to produce a reclassifed raster map using the above criteria. This means that the pixel values of each raster layer will be equal to the above values if their pixels fall within its range.</p>
<p>Let us reclassify each of the water-based layers according to the above criteria, starting with waterways. Remember, we are reclassifying accordingly as:</p>
<ul>
<li>Values from 0 to 1 km as ‘5’ to represent ‘very high risk’</li>
<li>Values from above 1 to 5 as ‘4’ to represent ‘high risk’</li>
<li>Values from above 5 to 20 as ‘3’ to represent ‘moderate risk’</li>
<li>Values from above 20 to 50 as ‘2’ to represent ‘low risk’</li>
<li>Values from above 50+ as ‘1’ to represent ‘very low risk’</li>
</ul>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb39-1" tabindex="-1"></a><span class="co"># list the categorization scheme in a vector </span></span>
<span id="cb39-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb39-2" tabindex="-1"></a>distance_risk_categories <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">20</span>, <span class="dv">3</span>, <span class="dv">20</span>, <span class="dv">50</span>, <span class="dv">2</span>, <span class="dv">50</span>, <span class="cn">Inf</span>, <span class="dv">1</span>)</span>
<span id="cb39-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb39-3" tabindex="-1"></a><span class="co"># convert the vector into a matrix</span></span>
<span id="cb39-4"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb39-4" tabindex="-1"></a>distance_risk_categories_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(distance_risk_categories, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>, </span>
<span id="cb39-5"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb39-5" tabindex="-1"></a>    <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="cn">NULL</span>, <span class="fu">c</span>(<span class="st">&quot;from&quot;</span>, <span class="st">&quot;to&quot;</span>, <span class="st">&quot;value&quot;</span>)))</span>
<span id="cb39-6"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb39-6" tabindex="-1"></a><span class="co"># use the matrix to reclassify the desired raster</span></span>
<span id="cb39-7"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb39-7" tabindex="-1"></a>dist_waterways_categorised <span class="ot">&lt;-</span> <span class="fu">reclassify</span>(dist_waterways, distance_risk_categories_matrix, <span class="at">right =</span> <span class="cn">TRUE</span>, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>This is what the output for reclassified waterways would look like:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb40-1" tabindex="-1"></a><span class="fu">tm_shape</span>(dist_waterways_categorised) <span class="sc">+</span> </span>
<span id="cb40-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb40-2" tabindex="-1"></a>    <span class="fu">tm_raster</span>(</span>
<span id="cb40-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb40-3" tabindex="-1"></a>        <span class="at">style =</span> <span class="st">&quot;cat&quot;</span>, </span>
<span id="cb40-4"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb40-4" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Dist. to Waterway (km) &quot;</span>, </span>
<span id="cb40-5"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb40-5" tabindex="-1"></a>        <span class="at">palette=</span> <span class="fu">c</span>(<span class="st">&quot;#0571b0&quot;</span>, <span class="st">&quot;#92c5de&quot;</span>, <span class="st">&quot;#f7f7f7&quot;</span> , <span class="st">&quot;#f4a582&quot;</span> ,<span class="st">&quot;#ca0020&quot;</span>), </span>
<span id="cb40-6"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb40-6" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Very Low Risk (+50km)&quot;</span>, <span class="st">&quot;Low Risk (20-50km)&quot;</span>, <span class="st">&quot;Moderate Risk (5-20km)&quot;</span>, <span class="st">&quot;High Risk (1-5km)&quot;</span>, <span class="st">&quot;Very High Risk (&lt;1km)&quot;</span>)) <span class="sc">+</span></span>
<span id="cb40-7"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb40-7" tabindex="-1"></a>    <span class="fu">tm_shape</span>(districts) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">alpha =</span> <span class="dv">0</span>, <span class="at">border.col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb40-8"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb40-8" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>, <span class="at">legend.outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="images/general/16_recl_waterways.png" width="60%" style="display: block; margin: auto;" /></p>
<p>We will apply the above situation to the waterbody raster by reclassifying it with the same criteria:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb41-1" tabindex="-1"></a>dist_waterbody_categorised <span class="ot">&lt;-</span> <span class="fu">reclassify</span>(dist_waterbody, distance_risk_categories_matrix, <span class="at">right =</span> <span class="cn">TRUE</span>, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>The output should look something like:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb42-1" tabindex="-1"></a><span class="fu">tm_shape</span>(dist_waterbody_categorised) <span class="sc">+</span> </span>
<span id="cb42-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb42-2" tabindex="-1"></a>    <span class="fu">tm_raster</span>(</span>
<span id="cb42-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb42-3" tabindex="-1"></a>        <span class="at">style =</span> <span class="st">&quot;cat&quot;</span>, </span>
<span id="cb42-4"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb42-4" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Dist. to Waterbody (km)&quot;</span>, </span>
<span id="cb42-5"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb42-5" tabindex="-1"></a>        <span class="at">palette=</span> <span class="fu">c</span>(<span class="st">&quot;#0571b0&quot;</span>, <span class="st">&quot;#92c5de&quot;</span>, <span class="st">&quot;#f7f7f7&quot;</span> , <span class="st">&quot;#f4a582&quot;</span> ,<span class="st">&quot;#ca0020&quot;</span>), </span>
<span id="cb42-6"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb42-6" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Very Low Risk (+50km)&quot;</span>, <span class="st">&quot;Low Risk (20-50km)&quot;</span>, <span class="st">&quot;Moderate Risk (5-20km)&quot;</span>, <span class="st">&quot;High Risk (1-5km)&quot;</span>, <span class="st">&quot;Very High Risk (&lt;1km)&quot;</span>)) <span class="sc">+</span></span>
<span id="cb42-7"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb42-7" tabindex="-1"></a>    <span class="fu">tm_shape</span>(districts) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">alpha =</span> <span class="dv">0</span>, <span class="at">border.col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb42-8"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb42-8" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>, <span class="at">legend.outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="images/general/17_recl_waterbody.png" width="60%" style="display: block; margin: auto;" /></p>
</div>
<div id="elevation" class="section level4 hasAnchor" number="3.2.1.2">
<h4><span class="header-section-number">3.2.1.2</span> Elevation<a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#elevation" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For elevation, we have summarized these limits or thresholds for flood risk in a table as follows:</p>
<table>
<thead>
<tr class="header">
<th><strong>Risk type</strong></th>
<th><strong>Threshold</strong></th>
<th><strong>Assigned Score</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>High Risk</td>
<td>&lt;100m</td>
<td>5</td>
</tr>
<tr class="even">
<td>Moderate</td>
<td>100-500m</td>
<td>3</td>
</tr>
<tr class="odd">
<td>Low Risk</td>
<td>+500m</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Let us reclassify each of the elevation layer according to the above criteria. Remember, we are reclassifying accordingly as:</p>
<ul>
<li>Values up to 100 is labelled as ‘3’ to represent ‘high risk’</li>
<li>Values from 100 to 500 is labelled ‘2’ to represent ‘moderate risk’</li>
<li>Values from above 500 is labelled ‘1’ to represent ‘low risk’</li>
</ul>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb43-1" tabindex="-1"></a><span class="co"># list the categorization scheme in a vector </span></span>
<span id="cb43-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb43-2" tabindex="-1"></a>elevation_risk_categories <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>, <span class="dv">100</span>, <span class="dv">5</span>, <span class="dv">100</span>, <span class="dv">500</span>, <span class="dv">3</span>, <span class="dv">500</span>, <span class="cn">Inf</span>, <span class="dv">1</span>)</span>
<span id="cb43-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb43-3" tabindex="-1"></a><span class="co"># convert the vector into a matrix</span></span>
<span id="cb43-4"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb43-4" tabindex="-1"></a>elevation_risk_categories_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(elevation_risk_categories, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>, </span>
<span id="cb43-5"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb43-5" tabindex="-1"></a>    <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="cn">NULL</span>, <span class="fu">c</span>(<span class="st">&quot;from&quot;</span>, <span class="st">&quot;to&quot;</span>, <span class="st">&quot;value&quot;</span>)))</span>
<span id="cb43-6"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb43-6" tabindex="-1"></a><span class="co"># use the matrix to reclassify the desired raster</span></span>
<span id="cb43-7"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb43-7" tabindex="-1"></a>elevation_categorised <span class="ot">&lt;-</span> <span class="fu">reclassify</span>(land_elevation, elevation_risk_categories_matrix, <span class="at">right =</span> <span class="cn">TRUE</span>, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>This is what the output for reclassified elevation would look like:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb44-1" tabindex="-1"></a><span class="fu">tm_shape</span>(elevation_categorised) <span class="sc">+</span> </span>
<span id="cb44-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb44-2" tabindex="-1"></a>    <span class="fu">tm_raster</span>(</span>
<span id="cb44-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb44-3" tabindex="-1"></a>        <span class="at">style =</span> <span class="st">&quot;cat&quot;</span>, </span>
<span id="cb44-4"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb44-4" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Land Surface Elevation (m) &quot;</span>, </span>
<span id="cb44-5"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb44-5" tabindex="-1"></a>        <span class="at">palette=</span> <span class="fu">c</span>(<span class="st">&quot;#0571b0&quot;</span>, <span class="st">&quot;#f7f7f7&quot;</span>, <span class="st">&quot;#ca0020&quot;</span>), </span>
<span id="cb44-6"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb44-6" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Low Risk (+500m)&quot;</span>, <span class="st">&quot;Moderate Risk (100-500m)&quot;</span>, <span class="st">&quot;High Risk (&lt;100m)&quot;</span>)) <span class="sc">+</span></span>
<span id="cb44-7"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb44-7" tabindex="-1"></a>    <span class="fu">tm_shape</span>(districts) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">alpha =</span> <span class="dv">0</span>, <span class="at">border.col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb44-8"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb44-8" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>, <span class="at">legend.outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="images/general/18_recl_elev.png" width="60%" style="display: block; margin: auto;" /></p>
</div>
<div id="slope" class="section level4 hasAnchor" number="3.2.1.3">
<h4><span class="header-section-number">3.2.1.3</span> Slope<a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#slope" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For slope, we have also summarized these limits or thresholds for flood risk in a table as follows:</p>
<table>
<thead>
<tr class="header">
<th><strong>Risk type</strong></th>
<th><strong>Threshold</strong></th>
<th><strong>Assigned Score</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>High Risk</td>
<td>0-5 degrees</td>
<td>5</td>
</tr>
<tr class="even">
<td>Moderate</td>
<td>5-15 degrees</td>
<td>3</td>
</tr>
<tr class="odd">
<td>Low Risk</td>
<td>+15 degrees</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Let us reclassify each of the slope layer according to the above criteria. Remember, we are reclassifying accordingly as:</p>
<ul>
<li>Values from 0 to 5 is labelled as ‘3’ to represent ‘high risk’</li>
<li>Values from 5 to 15 is labelled ‘2’ to represent ‘moderate risk’</li>
<li>Values from above 15 is labelled ‘1’ to represent ‘low risk’</li>
</ul>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb45-1" tabindex="-1"></a><span class="co"># list the categorization scheme in a vector </span></span>
<span id="cb45-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb45-2" tabindex="-1"></a>slope_risk_categories <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">15</span>, <span class="dv">3</span>, <span class="dv">15</span>, <span class="cn">Inf</span>, <span class="dv">1</span>)</span>
<span id="cb45-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb45-3" tabindex="-1"></a><span class="co"># convert the vector into a matrix</span></span>
<span id="cb45-4"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb45-4" tabindex="-1"></a>slope_risk_categories_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(slope_risk_categories, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>, </span>
<span id="cb45-5"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb45-5" tabindex="-1"></a>    <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="cn">NULL</span>, <span class="fu">c</span>(<span class="st">&quot;from&quot;</span>, <span class="st">&quot;to&quot;</span>, <span class="st">&quot;value&quot;</span>)))</span>
<span id="cb45-6"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb45-6" tabindex="-1"></a><span class="co"># use the matrix to reclassify the desired raster</span></span>
<span id="cb45-7"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb45-7" tabindex="-1"></a>slope_categorised <span class="ot">&lt;-</span> <span class="fu">reclassify</span>(land_slope, slope_risk_categories_matrix, <span class="at">right =</span> <span class="cn">TRUE</span>, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>This is what the output for reclassified slope would look like:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb46-1" tabindex="-1"></a><span class="fu">tm_shape</span>(slope_categorised) <span class="sc">+</span> </span>
<span id="cb46-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb46-2" tabindex="-1"></a>    <span class="fu">tm_raster</span>(</span>
<span id="cb46-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb46-3" tabindex="-1"></a>        <span class="at">style =</span> <span class="st">&quot;cat&quot;</span>, </span>
<span id="cb46-4"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb46-4" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Slope (Degrees) &quot;</span>, </span>
<span id="cb46-5"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb46-5" tabindex="-1"></a>        <span class="at">palette=</span> <span class="fu">c</span>(<span class="st">&quot;#0571b0&quot;</span>, <span class="st">&quot;#f7f7f7&quot;</span>, <span class="st">&quot;#ca0020&quot;</span>), </span>
<span id="cb46-6"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb46-6" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Low Risk (+15)&quot;</span>, <span class="st">&quot;Moderate Risk (5-15)&quot;</span>, <span class="st">&quot;High Risk (0-5)&quot;</span>)) <span class="sc">+</span></span>
<span id="cb46-7"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb46-7" tabindex="-1"></a>    <span class="fu">tm_shape</span>(districts) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">alpha =</span> <span class="dv">0</span>, <span class="at">border.col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb46-8"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb46-8" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>, <span class="at">legend.outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="images/general/19_recl_slope.png" width="60%" style="display: block; margin: auto;" /></p>
</div>
<div id="built-settlement" class="section level4 hasAnchor" number="3.2.1.4">
<h4><span class="header-section-number">3.2.1.4</span> Built settlement<a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#built-settlement" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For built settlements, if only a binary indicator. We have also summarized these limits or thresholds for flood risk in a table as follows:</p>
<table>
<thead>
<tr class="header">
<th><strong>Risk type</strong></th>
<th><strong>Threshold</strong></th>
<th><strong>Assigned Score</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>High Risk</td>
<td>Urban zones</td>
<td>5</td>
</tr>
<tr class="even">
<td>Low Risk</td>
<td>Rural zones</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>We simply classify it as follows:</p>
<ul>
<li>Values with 1 (i.e., Urbanised zone) is labelled as ‘5’ to represent ‘high risk’</li>
<li>Values with 0 (i.e., Rural zone) is labelled ‘1’ to represent ‘low risk’</li>
</ul>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb47-1" tabindex="-1"></a><span class="co"># list the categorization scheme in a vector - force it! </span></span>
<span id="cb47-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb47-2" tabindex="-1"></a>urbanareas_risk_categories <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>, <span class="dv">1</span>, <span class="fl">0.5</span>, <span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb47-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb47-3" tabindex="-1"></a><span class="co"># convert the vector into a matrix</span></span>
<span id="cb47-4"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb47-4" tabindex="-1"></a>urbanareas_risk_categories_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(urbanareas_risk_categories, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>, </span>
<span id="cb47-5"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb47-5" tabindex="-1"></a>    <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="cn">NULL</span>, <span class="fu">c</span>(<span class="st">&quot;from&quot;</span>, <span class="st">&quot;to&quot;</span>, <span class="st">&quot;value&quot;</span>)))</span>
<span id="cb47-6"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb47-6" tabindex="-1"></a><span class="co"># use the matrix to reclassify the desired raster</span></span>
<span id="cb47-7"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb47-7" tabindex="-1"></a>urbanareas_categorised <span class="ot">&lt;-</span> <span class="fu">reclassify</span>(builtsettlements, urbanareas_risk_categories_matrix, <span class="at">right =</span> <span class="cn">TRUE</span>, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>This is what the output for reclassified slope would look like:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb48-1" tabindex="-1"></a><span class="fu">tm_shape</span>(urbanareas_categorised) <span class="sc">+</span> </span>
<span id="cb48-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb48-2" tabindex="-1"></a>    <span class="fu">tm_raster</span>(</span>
<span id="cb48-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb48-3" tabindex="-1"></a>        <span class="at">style =</span> <span class="st">&quot;cat&quot;</span>, </span>
<span id="cb48-4"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb48-4" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Built Settlements classification&quot;</span>, </span>
<span id="cb48-5"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb48-5" tabindex="-1"></a>        <span class="at">palette=</span> <span class="fu">c</span>(<span class="st">&quot;lightgrey&quot;</span>, <span class="st">&quot;#ca0020&quot;</span>), </span>
<span id="cb48-6"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb48-6" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Low Risk (Non-urban areas)&quot;</span>, <span class="st">&quot;High Risk (Urban areas)&quot;</span>)) <span class="sc">+</span></span>
<span id="cb48-7"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb48-7" tabindex="-1"></a>    <span class="fu">tm_shape</span>(districts) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">alpha =</span> <span class="dv">0</span>, <span class="at">border.col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb48-8"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb48-8" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>, <span class="at">legend.outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="images/general/20_recl_urban.png" width="60%" style="display: block; margin: auto;" /></p>
</div>
<div id="rainfall" class="section level4 hasAnchor" number="3.2.1.5">
<h4><span class="header-section-number">3.2.1.5</span> Rainfall<a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#rainfall" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For rainfall, we have summarized these limits or thresholds for flood risk in a table as follows:</p>
<table>
<thead>
<tr class="header">
<th><strong>Risk type</strong></th>
<th><strong>Threshold</strong></th>
<th><strong>Assigned Score</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Very High Risk</td>
<td>+250mm</td>
<td>5</td>
</tr>
<tr class="even">
<td>High Risk</td>
<td>200-250 mm</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Moderate</td>
<td>150-200 mm</td>
<td>3</td>
</tr>
<tr class="even">
<td>Low Risk</td>
<td>100-150 mm</td>
<td>2</td>
</tr>
<tr class="odd">
<td>Very Low Risk</td>
<td>0-100 mm</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Let us reclassify the rainfall according to the above criteria. Remember, we are reclassifying accordingly as:</p>
<ul>
<li>Values from 0 to 100 mm is ‘1’ to represent ‘very low risk’</li>
<li>Values from above 100 to 150 mm is ‘2’ to represent ‘low risk’</li>
<li>Values from above 150 to 200 mm is ‘3’ to represent ‘moderate risk’</li>
<li>Values from above 200 to 250 mm as ‘4’ to represent ‘high risk’</li>
<li>Values from +250m is ‘5’ to represent ‘very high risk’</li>
</ul>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb49-1" tabindex="-1"></a><span class="co"># list the categorization scheme in a vector </span></span>
<span id="cb49-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb49-2" tabindex="-1"></a>rain_risk_categories <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">1</span>, <span class="dv">100</span>, <span class="dv">150</span>, <span class="dv">2</span>, <span class="dv">150</span>, <span class="dv">200</span>, <span class="dv">3</span>, <span class="dv">200</span>, <span class="dv">250</span>, <span class="dv">4</span>, <span class="dv">250</span>, <span class="cn">Inf</span>, <span class="dv">5</span>)</span>
<span id="cb49-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb49-3" tabindex="-1"></a><span class="co"># convert the vector into a matrix</span></span>
<span id="cb49-4"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb49-4" tabindex="-1"></a>rain_risk_categories_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(rain_risk_categories, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>, </span>
<span id="cb49-5"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb49-5" tabindex="-1"></a>    <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="cn">NULL</span>, <span class="fu">c</span>(<span class="st">&quot;from&quot;</span>, <span class="st">&quot;to&quot;</span>, <span class="st">&quot;value&quot;</span>)))</span>
<span id="cb49-6"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb49-6" tabindex="-1"></a><span class="co"># use the matrix to reclassify the desired raster</span></span>
<span id="cb49-7"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb49-7" tabindex="-1"></a>rain_categorised <span class="ot">&lt;-</span> <span class="fu">reclassify</span>(precipitation, rain_risk_categories_matrix, <span class="at">right =</span> <span class="cn">TRUE</span>, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>This is what the output for reclassified waterways would look like:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb50-1" tabindex="-1"></a><span class="fu">tm_shape</span>(rain_categorised) <span class="sc">+</span> </span>
<span id="cb50-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb50-2" tabindex="-1"></a>    <span class="fu">tm_raster</span>(</span>
<span id="cb50-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb50-3" tabindex="-1"></a>        <span class="at">style =</span> <span class="st">&quot;cat&quot;</span>, </span>
<span id="cb50-4"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb50-4" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Total Monthly Rainfall (mm) &quot;</span>, </span>
<span id="cb50-5"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb50-5" tabindex="-1"></a>        <span class="at">palette=</span> <span class="fu">c</span>(<span class="st">&quot;#0571b0&quot;</span>, <span class="st">&quot;#92c5de&quot;</span>, <span class="st">&quot;#f7f7f7&quot;</span> , <span class="st">&quot;#f4a582&quot;</span> , <span class="st">&quot;#ca0020&quot;</span>), </span>
<span id="cb50-6"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb50-6" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Very Low Risk (&lt;100mm)&quot;</span>, <span class="st">&quot;Low Risk (100-150mm)&quot;</span> ,<span class="st">&quot;Moderate Risk (150-200mm)&quot;</span>, <span class="st">&quot;High Risk (200-250mm)&quot;</span>, <span class="st">&quot;Very High Risk (+250mm)&quot;</span>)</span>
<span id="cb50-7"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb50-7" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb50-8"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb50-8" tabindex="-1"></a>    <span class="fu">tm_shape</span>(districts) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">alpha =</span> <span class="dv">0</span>, <span class="at">border.col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb50-9"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb50-9" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>, <span class="at">legend.outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="images/general/21_recl_rainfall.png" width="60%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="finding-areas-that-flood-prone-based-on-reclassifed-rasters-through-averaging" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Finding areas that flood prone based on reclassifed rasters through averaging<a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#finding-areas-that-flood-prone-based-on-reclassifed-rasters-through-averaging" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can NOW identify the environmentally suitable areas for flood occurrence by averaging the score across the pixels. To do this, we must stake the rasters on top of each other to create a multiband raster object using the <code>stack()</code>.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb51-1" tabindex="-1"></a>Create_Multiband_RasterStack <span class="ot">&lt;-</span> <span class="fu">stack</span>(urbanareas_categorised, slope_categorised, elevation_categorised, dist_waterways_categorised, dist_waterbody_categorised, rain_categorised)</span></code></pre></div>
<p>We take the raster stack and use the function <code>calc()</code> to find the mean.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb52-1" tabindex="-1"></a>FloodRisk_Score_Averaged <span class="ot">&lt;-</span> <span class="fu">calc</span>(Create_Multiband_RasterStack, mean)</span></code></pre></div>
<p>Finally, we can visualizing the output accordingly:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb53-1" tabindex="-1"></a>flood_risk_averaged_map <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(FloodRisk_Score_Averaged) <span class="sc">+</span> </span>
<span id="cb53-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb53-2" tabindex="-1"></a>    <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">&quot;cont&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Flood Risk Score (Sum)&quot;</span>, <span class="at">palette=</span><span class="st">&quot;-RdYlGn&quot;</span>) <span class="sc">+</span></span>
<span id="cb53-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb53-3" tabindex="-1"></a>    <span class="fu">tm_shape</span>(regions) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">alpha =</span> <span class="dv">0</span>, <span class="at">border.col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span> <span class="fu">tm_text</span>(<span class="st">&quot;NAME_1&quot;</span>, <span class="at">size =</span> <span class="st">&quot;AREA&quot;</span>, <span class="at">col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb53-4"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb53-4" tabindex="-1"></a>    <span class="fu">tm_shape</span>(districts) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">alpha =</span> <span class="dv">0</span>, <span class="at">border.col =</span> <span class="st">&quot;black&quot;</span>, <span class="at">border.alpha =</span> <span class="fl">0.15</span>) <span class="sc">+</span>  </span>
<span id="cb53-5"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb53-5" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>, <span class="at">legend.outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="images/general/Final_raster_output.png" width="60%" style="display: block; margin: auto;" /></p>
<p>We can also create a binary version of this above map by simply reclassify in the values as ‘0’ to represent anything with score below 4 as a low risk versus high for scores 4 and above - reclassed as <code>1</code></p>
<p>Here is the code:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb54-1" tabindex="-1"></a>flood_zone_categories <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">1</span>)</span>
<span id="cb54-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb54-2" tabindex="-1"></a>flood_zone_categories_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(flood_zone_categories, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>, <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="cn">NULL</span>, <span class="fu">c</span>(<span class="st">&quot;from&quot;</span>, <span class="st">&quot;to&quot;</span>, <span class="st">&quot;value&quot;</span>)))</span>
<span id="cb54-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb54-3" tabindex="-1"></a>flood_risk_categorised <span class="ot">&lt;-</span> <span class="fu">reclassify</span>(FloodRisk_Score_Averaged, flood_zone_categories_matrix, <span class="at">right =</span> <span class="cn">TRUE</span>, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Here is the code for generating such output:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb55-1" tabindex="-1"></a>flood_risk_zoned_map <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(flood_risk_categorised) <span class="sc">+</span> </span>
<span id="cb55-2"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb55-2" tabindex="-1"></a>    <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">&quot;cat&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Flood Risk Zones&quot;</span>, <span class="at">palette=</span> <span class="fu">c</span>(<span class="st">&quot;white&quot;</span>, <span class="st">&quot;#f4a582&quot;</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Not High Risk&quot;</span>, <span class="st">&quot;High Risk&quot;</span>)) <span class="sc">+</span></span>
<span id="cb55-3"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb55-3" tabindex="-1"></a>    <span class="fu">tm_shape</span>(regions) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">alpha =</span> <span class="dv">0</span>, <span class="at">border.col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span> <span class="fu">tm_text</span>(<span class="st">&quot;NAME_1&quot;</span>, <span class="at">size =</span> <span class="st">&quot;AREA&quot;</span>, <span class="at">col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span> </span>
<span id="cb55-4"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb55-4" tabindex="-1"></a>    <span class="fu">tm_shape</span>(districts) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">alpha =</span> <span class="dv">0</span>, <span class="at">border.col =</span> <span class="st">&quot;black&quot;</span>, <span class="at">border.alpha =</span> <span class="fl">0.15</span>) <span class="sc">+</span> </span>
<span id="cb55-5"><a href="introduction-to-geoprocessing-of-gridded-data-in-rstudio.html#cb55-5" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>, <span class="at">legend.outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="images/general/Second_raster_output.png" width="60%" style="display: block; margin: auto;" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-to-rstudio-and-geoprocessing.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": true
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/UCLPG-MSC-SGDS/UCL-UoG-Workshop/edit/main/geoprocessing_of_rasters.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
